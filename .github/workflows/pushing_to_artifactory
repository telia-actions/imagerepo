 # This is a basic workflow to help you get started with Actions
 name: Docker Image Push to Artifactory
 
 # Controls when the workflow will run
 on: [workflow_dispatch]
   # Allows you to run this workflow manually from the Actions tab
 
 # A workflow run is made up of one or more jobs that can run sequentially or in parallel
 jobs:
   # This workflow contains a single job called "first_job"
   first_job:
     # Steps represent a sequence of tasks that will be executed as part of the job
      
     steps:
       # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
       - name: Checkout code 
         uses: actions/checkout@v3

       - name: Login to Docker Hub
         uses: docker/login-action@v1
	 with:
           username: ${{ secrets.DOCKER_USERNAME }}
	   password: ${{ secrets.DOCKER_ACCESS_TOKEN }}
	   
     
     # Define another step that uses the Docker CLI to pull the image:
       - name: Pull image
         run: docker pull adoptopenjdk/openjdk11:alpine-jre
             
     # Login to JFrog Artifactory
     
       - name: Login to JFrog Artifactory
         run: jfrog rt config --url="https://jfrog.teliacompany.io/artifactory/tfpt-managed-base-docker-images/" --user="${{ secrets.JFROG_USERNAME }}" --password="${{ secrets.JFROG_PASSWORD }}"
           
     # Finally, define a step that uses the JFrog CLI to push the image to Artifactory:
       - name: Push image to Artifactory
         run: jfrog rt docker-push adoptopenjdk/openjdk11:alpine-jre    tfpt-managed-base-docker-images/
